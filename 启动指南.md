# 银途工厂管理系统 MVP - 启动指南

## 🚀 快速启动（3分钟开始使用）

### 方法1：Docker一键启动（推荐）

1. **确保已安装Docker**
   ```bash
   # 检查Docker是否安装
   docker --version
   docker-compose --version
   ```

2. **启动系统**
   ```bash
   cd D:\factory-yintu
   docker-compose up -d
   ```

3. **访问系统**
   - 前端界面：http://localhost:3000
   - 后端API：http://localhost:8000/docs

### 方法2：本地开发启动

#### 后端启动
```bash
cd D:\factory-yintu\backend

# 安装依赖
pip install -r requirements.txt

# 启动后端服务
uvicorn app.main:app --reload --port 8000
```

#### 前端启动（新终端窗口）
```bash
cd D:\factory-yintu\frontend

# 安装依赖
npm install

# 启动前端服务
npm start
```

## 📊 功能使用指南

### 1. 库龄分析
1. 点击左侧菜单"库龄分析"
2. 点击"上传库存数据"按钮
3. 选择Excel文件（如：`7--SP货仓原材料-半成品库存明细--彭周全2025-8-.xlsx`）
4. 查看库龄分布图和呆滞料清单
5. 点击"导出报表"生成Excel文件

### 2. BOM匹配  
1. 点击左侧菜单"BOM匹配"
2. 上传呆滞料清单Excel文件
3. 上传BOM数据Excel文件
4. 点击"开始匹配"进行智能分析
5. 查看匹配建议和生产方案

### 3. 生产看板
1. 点击左侧菜单"生产看板"
2. 查看看板式订单管理界面
3. 监控生产进度和时间线
4. 跟踪每日生产目标

### 4. 成本分析
1. 点击左侧菜单"成本分析"
2. 点击"录入实际成本"按钮
3. 输入材料、人工、制造费用数据
4. 查看成本对比图表和差异分析

## 🔧 故障排除

### 问题1：端口被占用
```bash
# 检查端口占用
netstat -ano | findstr :3000
netstat -ano | findstr :8000

# 结束占用进程（替换PID）
taskkill /F /PID <进程ID>
```

### 问题2：Docker启动失败
```bash
# 重新构建容器
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

### 问题3：前端依赖安装失败
```bash
# 清理npm缓存
npm cache clean --force
# 删除node_modules重新安装
rm -rf node_modules package-lock.json
npm install
```

### 问题4：后端Python依赖问题
```bash
# 使用虚拟环境
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# 重新安装依赖
pip install --upgrade pip
pip install -r requirements.txt
```

## 📝 数据准备

### Excel文件格式要求

#### 库存数据文件
- 必需列：物料编号、物料名称、库存数量、库存价值、最后交易日期
- 支持格式：.xlsx, .xls
- 示例文件：`7--SP货仓原材料-半成品库存明细--彭周全2025-8-.xlsx`

#### BOM数据文件  
- 必需列：成品编号、成品名称、原料编号、原料名称、用量
- 支持多层级BOM结构
- 支持格式：.xlsx, .xls

#### 成本数据文件
- 必需列：产品编号、材料成本、人工成本、制造费用
- 示例文件：`P5033-J01-C1202成本250822.xlsx`

### SQL Server备份文件
- 支持格式：.bak
- 自动恢复到本地SQLite数据库
- 注意：需要安装SQL Server相关驱动

## ⚡ 性能优化建议

### 数据量大的处理建议
- Excel文件建议小于50MB
- 如果物料超过1万条，建议分批导入
- 使用Chrome浏览器获得最佳体验

### 系统配置优化
```bash
# 修改Docker内存限制
# 在docker-compose.yml中添加
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 2G
```

## 📈 使用技巧

### 1. 库龄分析最佳实践
- 定期（每周/每月）上传最新库存数据
- 重点关注>90天的呆滞物料
- 导出报表供管理层决策

### 2. BOM匹配策略
- 优先处理高价值呆滞料
- 考虑生产难度和市场需求
- 记录缺料清单用于采购计划

### 3. 成本控制要点
- 及时录入实际成本数据
- 监控差异率>10%的产品
- 分析成本构成变化趋势

## 🔒 数据安全

- 所有数据本地存储，不会上传到云端
- Excel文件上传后自动删除临时文件
- 支持数据导出备份
- 建议定期备份数据库文件

## 📞 技术支持

如遇到问题，请按优先级联系：

1. **查看日志**：`docker-compose logs backend` 或 `docker-compose logs frontend`
2. **重启服务**：`docker-compose restart`
3. **查看API文档**：http://localhost:8000/docs
4. **联系开发团队**：提供详细错误信息截图

---

🎉 **恭喜！您已成功部署银途工厂管理系统MVP版本！**