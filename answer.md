

  1. 数据源和格式

  - ERP数据库类型？（MySQL/Oracle/SQL Server？）
      SqlServer 2000
  - 能否直接访问数据库，还是只能通过导出文件？
       目前只能通过导出的SqlServer的bak文件
  - 数据表结构和字段名称？
       目前还不清楚
  - 数据质量如何？（缺失值、异常值情况）
       目前还不清楚

  2. BOM结构细节

  - BOM是否有版本管理？（同一产品多个BOM版本）
       取最新的
  - 替代料逻辑如何处理？
       MVP实现,不考虑
  - 半成品是否可以直接销售？
       不考虑
  - BOM中的损耗率如何考虑？
       MVP实现,不考虑
       

  3. 业务规则

  - 最小生产批量限制？
        MVP实现,不考虑
  - 不同产品线的生产优先级？
        MVP实现,不考虑
  - 呆滞料处理的决策流程？
        先记录状态,供管理层决策,可以生产成品,也可以销毁
  - 成本差异的可接受范围？
        MVP实现,不考虑

  4. 用户和权限

  - 有哪些用户角色？（管理层、计划员、仓管员？）
        管理层
  - 不同角色看到的数据范围？
        全量数据
  - 是否需要审批流程？
        暂不考虑审批

  🎯 项目难点分析

  难点1：数据清洗和库龄计算

  问题：
  - 仓库调拨会错误重置库龄
        是的
  - 需要追溯真实入库时间
        需要研究
  - 8000+物料的历史数据可能不完整
        是的

  解决思路：
  # 需要建立库龄追踪链
  真实入库日 = 追溯第一次入库记录（非调拨）
  实际库龄 = 今天 - 真实入库日

  难点2：BOM匹配算法性能

  问题：
  - 11000个BOM × 300行/BOM = 330万条关系
        是一个成品可能对应300多个BOM



  难点3：呆滞料匹配优化

  问题：
  - 如何定义"最优"匹配方案？
        展示多个匹配方案即可,后续由管理人员和订单信息做决策
  - 多个成品都能消耗同一呆滞料时如何选择？
        就按两个维度 成品利润率,呆滞料价值


  难点4：数据一致性

  问题：
  - ERP数据实时变化
  - 不同模块数据同步
  - 避免脏读问题
        暂时不考虑,不增加项目的复杂,但是预留扩展性




  💡 建议的渐进式实施策略

  Phase 1（3天）- 最小可用版本

  - 仅实现库龄分析
  - 数据库备份的数据导入
  - 简单Web界面
  - 目标：让用户看到价值

  Phase 2（3天）- 核心功能

  - 加入BOM匹配
  - 成本对比
  - 批量处理
  - 目标：解决核心痛点

  Phase 3（2天）- 完善优化

  - 生产看板
  - 自动化更新
  - 性能优化
  - 目标：提升用户体验

  ❓ 需要您确认的关键决策

  1. 数据接入方式：直连数据库 or Excel导入？
       SqlServer的bak数据
  2. 初期用户范围：先给哪个部门用？
        管理部门
  3. 优先级：4个功能模块的优先顺序？
        库龄和BOM匹配优先,生产计划看板其次,最后是成本差异分析
  4. 部署环境：本地服务器 or 云端？
        mvp最简实现
  5. 是否有示例数据：可以先用模拟数据开发？
    可以参考下面三个文件
        7--SP货仓原材料-半成品库存明细--彭周全2025-8-.xlsx
        20--半年以上呆料报告--彭周全2025-8-19.xlsx
        P5033-J01-C1202成本250822.xlsx

